include _currencySelect

mixin transactionForm(transaction = {})
  form(action=`/add/${transaction._id || ''}` method="POST" class="form")
    .input__group
      select(name="category")
        each category in categories
          - const selected = transaction.category && transaction.category._id.toString() === category._id.toString()
          option(value=`${category._id}|${category.name}` selected=selected) #{category.name}

    .input__group
      .input__element.input__element--large
        input(type="number" name="amount" step="0.01" placeholder="Amount (+ or âˆ’)" value=transaction.amount required)
      .input__element.input__element--small
        +currencySelect()

    .input__group
      .input__element.input__element--large
        - const date = h.moment(transaction.date).format('YYYY-MM-DD')
        input(type="date" name="date" value=date)
      .input__element.input__element--small
        select(name="repeat")
          option(value="once") Once
          option(value="weekly") Weekly
          option(value="monthly") Monthly

    .input__group
      input(type="text" name="description" placeholder="Description (optional)" value=transaction.description)

    .input__group
      input(type="submit" value="Save")

    if transaction._id
      .input__group
        a.form__button.form__button--danger(href=`/transaction/${transaction._id}/remove` onclick="return confirm('Are you sure you want to remove this transaction?')") Remove
