<section class="dashboard">
  <div class="spinner" ng-show="loading"></div>
  <div class="content" ng-hide="loading">
    <div>
      <input type="search" ng-model="searchQuery" placeholder="Search">
      <div>
        <select ng-options="y for y in years" ng-model="selectedYear"></select>
        <select ng-options="monthNames[m] for m in months" ng-model="selectedMonth"></select>
      </div>
    </div>

    <h1>Transactions <a title="Add transaction" ng-click="hideForm = !hideForm" ng-bind="hideForm ? '(+)' : '(-)'"></a></h1>

    <form ng-class="{dn: hideForm}" ng-submit="addTransaction()">
      <input type="date" ng-model="transaction.date" required>
      <input type="text" placeholder="Description" ng-model="transaction.description">
      <input type="number" step="0.01" placeholder="Amount" ng-model="transaction.amount" required>
      <select ng-options="c.name for c in categories" ng-model="transaction.category" required></select>
      <input type="submit" value="Add">
    </form>

    <div>
      <p ng-hide="dailyTransactions.length">No transactions yet.</p>
      <div ng-repeat="daily in dailyTransactions | filter:searchQuery">
        <h4>
          {{ daily.date }}
          <span ng-bind="daily.dayOfWeek"></span>
          <span ng-bind="daily.totalAmount | formatCurrency:currency"></span>
        </h4>
        <ol>
          <li ng-repeat="t in daily.transactions">
            {{ t.description }}
            <a title="Delete transaction" ng-click="deleteTransaction(t)">(x)</a>
            <span>{{ t.amount | formatCurrency:currency }}</span>
          </li>
        </ol>
      </div>
    </div>
  </div>
</section>
